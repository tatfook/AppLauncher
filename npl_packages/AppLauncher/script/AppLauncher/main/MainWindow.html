<pe:mcml>
    <script type="text/npl" src="MainWindow.lua">
<![CDATA[
NPL.load("script/AppLauncher/main/MainWindow.lua");
local MainWindow = commonlib.gettable("AppLauncher.MainWindow");
MainWindow.OnInit();
function DoUpdate()
    MainWindow.DoUpdate();
end
function GetDataSource(index)
	if(index == nil) then
		return #(MainWindow.menus);
	else
		return MainWindow.menus[index];
	end
end
function IsSelected(index)
    return MainWindow.selected_index == index;
end
function OnSelected(index)
    MainWindow.OnClick(index);
end
function GetSelectedIndex()
    return MainWindow.GetSelectedIndex();
end
function OnLogin()
    echo("============OnLogin");
end
function OnRegister()
    echo("============OnRegister");
end
function OnUpdate()
    MainWindow.OnUpdate();
end
function OnRun()
    MainWindow.OnRun();
end
]]></script>
<!--<div>
    state:<input type="button" name="state_txt" value="none" />
</div>
<div>
    percent:<input type="button"  name="percent_txt" value ="0" style="width:200px;"/>
</div>
<input type="button" name="update_btn" value="update" tooltip="aaaaaa" onclick="DoUpdate()"/>-->
<div name="window_background" width="100%" height="100%" style="background:;">
    <div style="height:78px;padding:15px;background-color:#77777777">
        <div style="float:left;width:128px;height:16px;margin-top:10px;background:url(Texture/AppLauncherRes/keepwork_logo_32bits.png#0 0 128 16)"></div>
        <input type="button" value="未激活" onclick="OnActivation()" style="float:left;margin-left:20px;width:102px;height:38px;background:url(Texture/AppLauncherRes/newskin/btn_black1_32bits.png:2 2 2 2)"/>
        <div align="right" style="float:left;width:640px">
            <input type="button" value="登录" onclick="OnLogin()" style="float:left;width:102px;height:38px;background:url(Texture/AppLauncherRes/newskin/btn_blue1_32bits.png:2 2 2 2)"/>
            <input type="button" value="注册" onclick="OnRegister()" style="float:left;margin-left:20px;width:102px;height:38px;background:url(Texture/AppLauncherRes/newskin/btn_black1_32bits.png:2 2 2 2)"/>
            <input type="button" value="中文" onclick="OnLanguage()" style="float:left;margin-left:40px;margin-top:10px;width:102px;height:38px;background:url(Texture/AppLauncherRes/newskin/btn_blue1_32bits.png:2 2 2 2)"/>
        </div>
    </div>
    <!--horizontal line-->
    <div width="100%" style="height:1px;background-color:#ffffff"/>
    <div >
        <div style="float:left;width:220px;background-color:#111111dd" height="100%">
            <div>
                <pe:gridview DataSource="<%=GetDataSource %>" name="menuList"
                    CellPadding="0" ItemsPerLine="1" AllowPaging="false" pagesize="100">
                    <Columns>
                        <div>
                            <pe:if condition='<%=IsSelected(Eval("index"))%>' >
                                <div width="100%" style="padding-left:10px;padding-top:7px;width:220px;height:48px;background:url(Texture/AppLauncherRes/newskin/underline_32bits.png:6 6 6 6)">
                                    <img width="36" height="36" src='<%=Eval("icon")%>'/>
                                    <div style="float:left;margin-left:5px;margin-top:10px;color:#ffffff;" ><%=Eval("label")%></div>
                                </div>
                            </pe:if>
                            <pe:if condition='<%=not IsSelected(Eval("index"))%>' >
                                <div width="100%" name='<%=Eval("index")%>' onclick='OnSelected()'  style="padding-left:10px;padding-top:7px;width:200px;height:50px;">
                                    <img width="36" height="36" src='<%=Eval("icon")%>'/>
                                    <div style="float:left;margin-left:5px;margin-top:10px;color:#ffffff;" ><%=Eval("label")%></div>
                                </div>
                            </pe:if>
                        </div>
                    </Columns>
                </pe:gridview>
            </div>
        </div>
        <!--vertical line-->
        <div style="float:left;">
            <div height="100%" style="width:1px;background-color:#ffffff"/>
        </div>
        <div width="100%" style="float:left;padding-left:10px;padding-top:10px;">
            <pe:if condition='<%=GetSelectedIndex() == 1%>'>
                <div style="width:180px;height:86px;background:url(Texture/AppLauncherRes/paracraft_title_32bits.png#0 0 180 86)"/>
                <div height="90%">
                    <div style="float:left;padding:1px;background-color:#ffffff">
                        <!--left data-->
                            <div style="width:524px;height:279px;background:url(Texture/AppLauncherRes/paracraft_1_32bits.png#0 0 524 279)"/>
                    </div>
                    <div width="100%" style="float:left;margin-left:5px;padding:1px;">
                        <div align="center" style="min-width:220px;min-height:279px;">
                            <!--right data-->
                            <div style="height:260px;">
                                <div style="margin-top:15px;">
                                    <div style="float:left;width:4px;height:25px;background:url(Texture/AppLauncherRes/blue_line_32bits.png#0 0 3 16:1 1 1 1)"/>
                                    <div style="float:left;margin-left:10px;color:#ffffff;">Paracraft电影方块教程</div>
                                </div>
                                <div style="margin-top:15px;">
                                    <div style="float:left;width:4px;height:25px;background:url(Texture/AppLauncherRes/blue_line_32bits.png#0 0 3 16:1 1 1 1)"/>
                                    <div style="float:left;margin-left:10px;color:#ffffff;">Paracraft电影方块教程</div>
                                </div>
                                <div style="margin-top:15px;">
                                    <div style="float:left;width:4px;height:25px;background:url(Texture/AppLauncherRes/blue_line_32bits.png#0 0 3 16:1 1 1 1)"/>
                                    <div style="float:left;margin-left:10px;color:#ffffff;">Paracraft电影方块教程</div>
                                </div>
                                <div style="margin-top:15px;">
                                    <div style="float:left;width:4px;height:25px;background:url(Texture/AppLauncherRes/blue_line_32bits.png#0 0 3 16:1 1 1 1)"/>
                                    <div style="float:left;margin-left:10px;color:#ffffff;">Paracraft电影方块教程</div>
                                </div>
                                <div style="margin-top:15px;">
                                    <div style="float:left;width:4px;height:25px;background:url(Texture/AppLauncherRes/blue_line_32bits.png#0 0 3 16:1 1 1 1)"/>
                                    <div style="float:left;margin-left:10px;color:#ffffff;">Paracraft电影方块教程</div>
                                </div>
                            </div>

                            <div align="right" style="color:#ffffff">
                                <div style="float:left;">查看更多</div>
                                <div style="float:left;margin-left:2px;margin-top:2px;width:16px;height:16px;background:url(Texture/AppLauncherRes/arrow_right_32bits.png)"/>
                            </div>
                        </div>
                    </div>
                </div>
            </pe:if>
            <pe:if condition='<%=GetSelectedIndex() ~= 1%>'>
                <div style="width:180px;height:86px;"/>
                <div height="90%">
                    <div style="color:#ffffff">
                        <%=GetSelectedIndex()%>
                    </div>
                </div>
            </pe:if>
            <div style="margin-top:-30px;">
                <div>
                    <input type="button" value="进入" onclick="OnRun()" style="float:left;width:122px;height:62px;background:url(Texture/AppLauncherRes/newskin/btn_enter_32bits.png:6 6 6 6)"/>
                    <input type="button" value="更新" onclick="OnUpdate()" style="float:left;margin-left:10px;width:122px;height:62px;background:url(Texture/AppLauncherRes/newskin/btn_update_32bits.png:6 6 6 6)"></input>
                    <div style="float:left;padding-right:10px;">
                        <div align="center" style="background:url(Texture/AppLauncherRes/newskin/tips_text_bg_32bits.png:2 2 2 2)">
                            <div style="float:left;color:#ffffff">
                                <pe:label name="state_txt" style="width:400px;height:22px;text-align:center;"/>
                            </div>
                        </div>

                        <div align="center" width="100%" style="margin-left:10px;margin-right:10px;height:22px;background:url(Texture/AppLauncherRes/newskin/progress_black_32bits.png:6 6 6 6)">
                            <pe:progressbar name="progress_bar" width="100%" style="height:22px;" Minimum = "0" Maximum = "100" Value="75" blockimage="Texture/AppLauncherRes/newskin/progress_blue_32bits.png:6 6 6 6" background="" />
                        </div>

                        <div align="right" style="color:#7d7d7d;font-size:12px;">
                            © 2014 Tatfool Powered by ParaEngine and NPL
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

</div>
</pe:mcml>
